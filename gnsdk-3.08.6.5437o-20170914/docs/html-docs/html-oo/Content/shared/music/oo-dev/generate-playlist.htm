<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___Top_Navigation" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="[%=System.LinkedTitle%]">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Generating a Playlist</title>
        <link href="../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" />
        <link href="https://cloud.typography.com/7045754/7789972/css/fonts.css" rel="stylesheet" />
        <style>/*&lt;meta /&gt;*/

.button.next-topic-button
{
	-pie-background: url('../../../../Skins/Default/Stylesheets/Images/navigate-next.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.previous-topic-button
{
	-pie-background: url('../../../../Skins/Default/Stylesheets/Images/navigate-previous.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.separator-button
{
	-pie-background: linear-gradient(#ffffff, #ececec);
}

.button.remove-highlight-button
{
	-pie-background: url('../../../../Skins/Default/Stylesheets/Images/highlight.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.separator-button
{
	-pie-background: linear-gradient(#ffffff, #ececec);
}

.button.expand-all-button
{
	-pie-background: url('../../../../Skins/Default/Stylesheets/Images/expand.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.separator-button
{
	-pie-background: linear-gradient(#ffffff, #ececec);
}

.button.print-button
{
	-pie-background: url('../../../../Skins/Default/Stylesheets/Images/printer.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.collapse-all-button
{
	-pie-background: url('../../../../Skins/Default/Stylesheets/Images/collapse.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.needs-pie
{
	behavior: url('../../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <link href="../../../Resources/TableStyles/Standard.css" rel="stylesheet" />
        <link href="../../../Resources/Stylesheets/MainStyles.css" rel="stylesheet" />
        <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js">
        </script>
        <script src="../../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../../Resources/Scripts/foundation.6.2.3_custom.js">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div>
                        <nav class="title-bar tab-bar" data-mc-ignore="true">
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="relative clearfix"><a class="logo" href="../../../landing-page/gnsdk-home.htm" alt="Logo"></a>
                                    <div class="navigation-wrapper nocontent">
                                        <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="1" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                            <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                            </li>
                                        </ul>
                                    </div>
                                    <button class="menu-icon" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="nav-search row outer-row">
                                <form class="search" action="#">
                                    <div class="search-bar search-bar-container needs-pie">
                                        <input class="search-field needs-pie" type="search" placeholder="Search" />
                                        <div class="search-filter-wrapper">
                                            <div class="search-filter">
                                                <div class="search-filter-content">
                                                    <ul>
                                                        <li>All Files</li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="search-submit-wrapper" dir="ltr">
                                            <div class="search-submit" title="Search">
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </nav>
                    </div>
                    <section class="main-section">
                        <div class="row outer-row" data-mc-content-body="True">
                            <p style="font-weight: bold;"><span class="GeneralProductNameFull">GNSDK</span> <span class="GeneralAPI">OO APIs</span></p>
                            <p>Version 3.08.6.5437 : <span class="SystemShortDate">9/14/2017</span></p>
                            <hr width="100%" size="0" align="center" />
                            <div class="content">
                                <div id="contentBody">
                                    <div class="row collapse">
                                        <div class="sideContent">
                                            <div class="clearfix">
                                                <div class="buttons popup-container clearfix topicToolbarProxy _Skins_TopicToolBar mc-component nocontent">
                                                    <div class="button-group-container-left">
                                                        <button class="button needs-pie next-topic-button" title="Navigate next">
                                                            <img src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="next topic" />
                                                        </button>
                                                        <button class="button needs-pie previous-topic-button" title="Navigate previous">
                                                            <img src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="previous topic" />
                                                        </button>
                                                        <div class="button-separator">
                                                        </div>
                                                        <button class="button needs-pie remove-highlight-button" title="Remove Highlights">
                                                            <img src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="remove highlight" />
                                                        </button>
                                                        <div class="button-separator">
                                                        </div>
                                                        <button class="button needs-pie expand-all-button" data-state1-class="expand-all-button" data-state2-class="collapse-all-button" data-state2-title="Collapse all" title="Expand all" data-state1-title="Expand all">
                                                            <img src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="expand all" />
                                                        </button>
                                                        <div class="button-separator">
                                                        </div>
                                                        <button class="button needs-pie print-button" title="Print">
                                                            <img src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="print" />
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                            <ul class="nocontent menu _Skins_SideMenu mc-component" data-mc-is-context-sensitive="True" data-mc-linked-toc="Data/Tocs/gnsdk__gnsdk_oo_all.js" data-mc-side-menu="True" data-mc-max-depth="4" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                            </ul>
                                        </div>
                                        <div class="nocontent">
                                            <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                                            </div>
                                        </div>
                                        <h1><a name="kanchor295"></a>Generating a Playlist</h1>
                                        <p>You can easily integrate the Playlist SDK into your media management application. Note that your application should already have identifiers for all its media and its own metadata database. The Playlist module allows your application to create Playlists—sets of related media—from larger collections. <b><i><a name="kanchor296"></a>Collection Summaries</i></b>, that you create, are the basis for generating playlists. Collection Summaries contain attribute data about a given set of media. For Playlist operations—create, populate, store, delete, and so on.—use the <code class="prettyprint">GnPlaylistCollection</code> class. The GNSDK supports multiple user collections and therefore multiple Collection
Summaries.</p>
                                        <p><b>To generate a Playlist:</b>
                                        </p>
                                        <ol>
                                            <li value="1">Create a Collection Summary</li>
                                            <li value="2"><a name="kanchor297"></a><a name="kanchor298"></a>Populate the Collection Summary with media objects, most likely returned from Gracenote queries</li>
                                            <li value="3">(Optional) Store the Collection Summary</li>
                                            <li value="4">(Optional) Load the stored Collection Summary into memory in preparation for Playlist results generation</li>
                                            <li value="5"><a name="kanchor299"></a><a name="kanchor300"></a><a name="kanchor301"></a>Generate a Playlist from a Collection Summary using either the More Like This functionality or with a Playlist Description Language (PDL) statement (see the Playlist PDL Specification).</li>
                                            <li value="6">Access and display Playlist results.</li>
                                        </ol>
                                        <h2>Creating a Collection Summary</h2>
                                        <p>To create a Collection Summary, your application needs to instantiate a <code class="prettyprint">GnPlaylistCollection</code> object:</p>
                                        <p><b>C++</b>
                                        </p><pre class="prettyprint">playlist::GnPlaylistCollection myCollection;
myCollection= playlist::GnPlaylistCollection("MyCollection");</pre>
                                        <p><b>C#</b>
                                        </p><pre class="prettyprint">GnPlaylistCollection playlistCollection;
playlistCollection = GnPlaylist.CollectionCreate("sample_collection");</pre>
                                        <p><b>Java</b>
                                        </p><pre class="prettyprint">GnPlaylistCollection myCollection = new GnPlaylistCollection();</pre>
                                        <p>This call creates a new, empty Collection Summary. The next step is to populate it with media items that you can use to generate Playlists.</p>
                                        <p class="note" data-mc-autonum="&lt;b&gt;&lt;span style=&quot;color: #e31b23;&quot; class=&quot;mcFormatColor&quot;&gt;Note: &lt;/span&gt;&lt;/b&gt;"><span class="autonumber"><span><b><span style="color: #e31b23;" class="mcFormatColor">Note: </span></b></span></span><b>Note</b>: Each new Collection Summary that you create must have a unique name. Although it is possible to create more than one Collection Summary with the same name, if these Collection Summaries are then saved to local storage, one Collection will override the other. To avoid this, ensure that Collection Summary names are unique.</p>
                                        <h2><a name="PopCS"></a>Populating a Collection Summary</h2>
                                        <p>To build a Collection Summary, your application needs to provide data for each media item you want it to contain. To add an item, and provide data, use the <code class="prettyprint">GnPlaylistCollection</code>'s <code class="prettyprint">Add</code><a name="kanchor302"></a><a name="kanchor303"></a> method. This API takes a media identifier (any application-determined unique string) and an album, track, or contributor match object. The match object should come from a recognition event using MusicID, MusicID-File, or other GNSDK module.</p>
                                        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" height="15" width="16" alt="Closed" data-mc-alt2="Open" /><b>C++</b></a></span>
                                            <div class="MCDropDownBody dropDownBody"><pre class="prettyprint"><a name="kanchor304"></a><a name="kanchor305"></a><a name="kanchor306"></a>
/* Create a unique identifier for every track that is added to the playlist.
   Ideally the ident allows for the identification of which track it is.
   for example path/filename.ext , or an id that can be externally looked up.
*/
ss.str("");
ss &lt;&lt; index &lt;&lt; "_" &lt;&lt; ntrack;

/*
  Add the the Album and Track GDO for the same ident so that we can
  query the Playlist Collection with both track and album level attributes.
*/
std::string result = ss.str();
collection.Add(result.c_str(), album);   /* Add the album*/
collection.Add(result.c_str(), *itr);    /* Add the track*/</pre>
                                            </div>
                                        </div>
                                        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" height="15" width="16" alt="Closed" data-mc-alt2="Open" />C#
        </a></span>
                                            <div class="MCDropDownBody dropDownBody"><pre class="prettyprint">/* Create a unique identifier for every track that is added to the playlist.
   Ideally, the identifier allows for the identification of which track it is.
   for example path/filename.ext , or an id that can be externally looked up.
*/
string uniqueIdent = countOrdinal + "_" + trackOrdinal;playlistCollection.Add(uniqueIdent, album);
          
/*
   Add the the Album and Track GDO for the same identifier so we can
   query the Playlist Collection with both track and album level attributes.
*/
playlistCollection.Add(uniqueIdent, album);
playlistCollection.Add(uniqueIdent, track);</pre>
                                            </div>
                                        </div>
                                        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" height="15" width="16" alt="Closed" data-mc-alt2="Open" />Java
        </a></span>
                                            <div class="MCDropDownBody dropDownBody"><pre class="prettyprint">String uniqueIdent = "";
uniqueIdent = String.valueOf(index).concat("_").concat(String.valueOf(ntrack));

/*
 * Add the the Album and Track GDO for the same identifier so we can
 * query the Playlist Collection with both track and album level attributes.
 */
gnPlaylistCollection.add(uniqueIdent, gnAlbum);
gnPlaylistCollection.add(uniqueIdent, gnTrack);</pre>
                                            </div>
                                        </div>
                                        <h3>Retrieving Playlist Attributes in Queries</h3>
                                        <p>When creating a MusicID or MusicID-File query to populate a playlist, you must set the following query options to ensure that the appropriate Playlist attributes are returned (depending on the type of query):</p>
                                        <ul>
                                            <li value="1"><code class="prettyprint">GnLookupData.kLookupDataSonicData</code>
                                            </li>
                                            <li value="2"><code class="prettyprint">GnLookupData.kLookupDataPlaylist</code>
                                            </li>
                                        </ul>
                                        <p><b>C++</b>
                                        </p><pre class="prettyprint">musicId.Options().LookupData(kLookupDataSonicData, true);
musicId.Options().LookupData(kLookupDataPlaylist, true);</pre>
                                        <h2>How Playlist Gathers Data</h2>
                                        <p>When given an album match object, Playlist extracts necessary album data,  traverses to the matched track, and extracts necessary track data. Playlist stores this data for the given identifier. If the album object does not contain the matched track , no track data is collected. Playlist also gathers data from both the album and track contributors as detailed below.</p>
                                        <p>When given a track match object, Playlist gathers any necessary data from the track, but it is not able to gather any album-related data (such as album title). Playlist also gathers data from the track contributors as detailed below.</p>
                                        <p>When given a contributor match object (or traversing into one from an album or track), Playlist gathers the necessary data from the contributor. If the contributor is a collaboration, data from both child contributors is gathered as well.</p>
                                        <p class="note" data-mc-autonum="&lt;b&gt;&lt;span style=&quot;color: #e31b23;&quot; class=&quot;mcFormatColor&quot;&gt;Note: &lt;/span&gt;&lt;/b&gt;"><span class="autonumber"><span><b><span style="color: #e31b23;" class="mcFormatColor">Note: </span></b></span></span>In some cases an audio track may not contain enough information to match it with a single <code class="prettyprint">GnTrack</code> object, in such caes you application can use the available information to add it to the Collection Summary. For example if only album title or artist name information is available <code class="prettyprint">GnMusicId</code> could be used to match a <code class="prettyprint">GnAlbum</code> or <code class="prettyprint">GnContributor</code> object which can then be added. Similarly if only genre information is available the Lists's subsystem could be used tomatch a <code class="prettyprint">GnListElement</code> object which can then be added.</p>
                                        <h2><a name="kanchor307"></a><a name="kanchor308"></a><a name="kanchor309"></a>Working with Local Storage</h2>
                                        <p>Playlist Collection Summaries are stored entirely in heap memory. To avoid re-creating them every time your application starts you should store them persistently. You can store and manage Collection Summaries in local storage with the <code class="prettyprint">GnPlaylistStorage</code>'s <code class="prettyprint">Store</code> method, which takes a <code class="prettyprint">GnPlaylistCollection</code> object. <b><a name="kanchor310"></a>Prior to doing this, your application should enable a storage solution such as SQLite.</b> Alternatively, a Collection Summary can be serialized into a string that your
application can store persistently and later use to reconstitute a Collection Summary in memory.</p>
                                        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" height="15" width="16" alt="Closed" data-mc-alt2="Open" /><b>C++</b></a></span>
                                            <div class="MCDropDownBody dropDownBody"><pre class="prettyprint"><a name="kanchor311"></a><a name="kanchor312"></a>/* Instantiate SQLite module to use as our database engine*/
GnStorageSqlite storageSqlite;

/* This module defaults to use the current folder when initialized, 
** but we set it manually here to demonstrate the option.
 */
storageSqlite.Options().StorageLocation(".");

/* Initialize Storage for storing Playlist Collections */
playlist::GnPlaylistStorage plStorage;
plStorage.Store(myCollection);</pre>
                                            </div>
                                        </div>
                                        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" height="15" width="16" alt="Closed" data-mc-alt2="Open" />C#
        </a></span>
                                            <div class="MCDropDownBody dropDownBody"><pre class="prettyprint">/* Initialize Storage for storing Playlist Collections */
playlist::GnPlaylistStorage plStorage;
gnStorage.StorageFolder = "../../../sample_db";
playlist.StoreCollection(playlistCollection);</pre>
                                            </div>
                                        </div>
                                        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" height="15" width="16" alt="Closed" data-mc-alt2="Open" />Java
        </a></span>
                                            <div class="MCDropDownBody dropDownBody"><pre class="prettyprint">// Initialize Storage for storing Playlist Collections
GnStorageSqlite storage = new GnStorageSqlite();
GnPlaylistStorage plStorage = GnPlaylist.collectionStorage();
plStorage.store(myCollection);</pre>
                                            </div>
                                        </div>
                                        <p>Other <code class="prettyprint">GnPlaylistStorage</code> methods include:</p>
                                        <ul>
                                            <li value="1"><code class="prettyprint">Location</code>—Setting a storage location specifically for playlist collections</li>
                                            <li value="2"><code class="prettyprint">Remove</code>—Removing a collection from storage</li>
                                            <li value="3"><code class="prettyprint">Load</code>—Loading a collection from storage</li>
                                            <li value="4"><code class="prettyprint">Names</code>—Getting an iterator for names of stored collections</li>
                                            <li value="5"><code class="prettyprint">Compact</code>—Compacting storage</li>
                                        </ul>
                                        <h2>Generating a Playlist Using More Like This</h2>
                                        <p>To streamline your Playlist implementation, you can use the <code class="prettyprint">GnPlaylistCollection</code>'s <code class="prettyprint">GenerateMoreLikeThis</code> method, which uses the "More Like This" algorithm to obtain results, eliminating the need to use Playlist Definition Language (PDL) statements.</p>
                                        <p class="note" data-mc-autonum="&lt;b&gt;&lt;span style=&quot;color: #e31b23;&quot; class=&quot;mcFormatColor&quot;&gt;Note: &lt;/span&gt;&lt;/b&gt;"><span class="autonumber"><span><b><span style="color: #e31b23;" class="mcFormatColor">Note: </span></b></span></span>Note that a "More Like This" playlist will not include the seed track. If you want the seed track, you will need to add it to the playlist yourself.</p>
                                        <p>You can use the <code class="prettyprint">GnPlaylistMoreLikeThisOptions</code> class to set the following options when generating a More Like This Playlist. Please note that these options are not serialized or stored. </p>
                                        <table class="TableStyle-Standard" cellspacing="0" style="mc-table-style: url('../../../Resources/TableStyles/Standard.css');">
                                            <thead>
                                                <tr class="TableStyle-Standard-Head-Header1">
                                                    <th class="TableStyle-Standard-HeadE-Regular-Header1">Option Method</th>
                                                    <th class="TableStyle-Standard-HeadD-Regular-Header1">Description</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr class="TableStyle-Standard-Body-Row1">
                                                    <td class="TableStyle-Standard-BodyE-Regular-Row1"><code class="prettyprint">MaxTracks</code>
                                                    </td>
                                                    <td class="TableStyle-Standard-BodyD-Regular-Row1">
                                                        <p>Maximum number of tracks returned in a 'More Like This' playlist. Must evaluate to a number greater than 0. Default is 25.</p>
                                                    </td>
                                                </tr>
                                                <tr class="TableStyle-Standard-Body-Row1">
                                                    <td class="TableStyle-Standard-BodyE-Regular-Row1"><code class="prettyprint">MaxPerArtist</code>
                                                    </td>
                                                    <td class="TableStyle-Standard-BodyD-Regular-Row1">
                                                        <p>Maximum number of tracks per artist returned in a 'More Like This' playlist. Must evaluate to a number greater than 0. Default is 2.</p>
                                                    </td>
                                                </tr>
                                                <tr class="TableStyle-Standard-Body-Row1">
                                                    <td class="TableStyle-Standard-BodyE-Regular-Row1"><code class="prettyprint">MaxPerAlbum</code>
                                                    </td>
                                                    <td class="TableStyle-Standard-BodyD-Regular-Row1">
                                                        <p>Maximum number of results per album returned. Must evaluate to a number greater than 0. Default is 1.</p>
                                                    </td>
                                                </tr>
                                                <tr class="TableStyle-Standard-Body-Row1">
                                                    <td class="TableStyle-Standard-BodyB-Regular-Row1"><code class="prettyprint">RandomSeed</code>
                                                    </td>
                                                    <td class="TableStyle-Standard-BodyA-Regular-Row1">
                                                        <p>Randomization seed value used in calculating a More Like This playlist. Must evaluate to a number greater than 0. To re-create a playlist, use the same number - different numbers create different playlists. If "0", using a random seed is disabled. Default is 0.</p>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <p><b>C++</b>
                                            <p>A More Like This playlist can be generated from a seed, which can be any Gracenote data object. For example, you can use <code class="prettyprint">GnMusicId</code> to perform a text search for a specific track and receive a <code class="prettyprint">GnAlbum</code> object. Your application can provide the <code class="prettyprint">GnAlbum</code> object as the seed.</p>
                                            <p class="note" data-mc-autonum="&lt;b&gt;&lt;span style=&quot;color: #e31b23;&quot; class=&quot;mcFormatColor&quot;&gt;Note: &lt;/span&gt;&lt;/b&gt;"><span class="autonumber"><span><b><span style="color: #e31b23;" class="mcFormatColor">Note: </span></b></span></span>Do not use the <code class="prettyprint">GnTrack</code> object as the seed, Playlist will use the "matched" <code class="prettyprint">GnTrack</code> object to determine which track on the album to use.</p><b>C++</b>
                                        </p><pre class="prettyprint">/* Change the possible result set to be a maximum of 30 tracks. */
collection.MoreLikeThisOptions().MaxTracks(30);
      
/* Change the max per artist to be 20 */
collection.MoreLikeThisOptions().MaxPerArtist(20);
      
/* Change the max per album to be 5 */
collection.MoreLikeThisOptions().MaxPerAlbum(5);</pre>
                                        <p>To generate a More Like This playlist, call the <code class="prettyprint">GnPlaylistCollection</code>'s <code class="prettyprint">GenerateMoreLikeThis</code> method with a user object handle and a Gracenote data object, such as the object of the track that is currently playing.</p>
                                        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" height="15" width="16" alt="Closed" data-mc-alt2="Open" /><b>C++</b></a></span>
                                            <div class="MCDropDownBody dropDownBody"><pre class="prettyprint">
/* Generating more like this Playlist */
/* Create seed data to generate more like this playlist*/
/*
 * A seed gdo can be any recognized media gdo.
 * In this example, we are using a gdo from a track in the playlist collection summary,
 * randomly selecting the 5th element
 */
playlist::GnPlaylistIdentifier ident    = collection.MediaIdentifiers().at(4).next();
playlist::GnPlaylistMetadata   seed_album = collection.Metadata(user, ident);
playlist::GnPlaylistResult resultMoreLikeThis = collection.GenerateMoreLikeThis(user, seed_album, topColl));
</pre>
                                            </div>
                                        </div>
                                        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" height="15" width="16" alt="Closed" data-mc-alt2="Open" />C#
        </a></span>
                                            <div class="MCDropDownBody dropDownBody"><pre class="prettyprint">/*
 * A seed gdo can be any recognized media gdo.
 * In this example we are using the a gdo from a random track in the playlist collection summary
 */
GnPlaylistIdentifier identifier = playlistCollection.MediaIdentifiers.at(3).Current;
GnPlaylistMetadata data = playlistCollection.Metadata(user, identifier);
playlistCollection.MoreLikeThisOptionSet(GnPlaylistCollection.GenerateMoreLikeThisOption.kMoreLikeThisMaxPerAlbum, 5);
GnPlaylistResult playlistResult = playlistCollection.GenerateMoreLikeThis(user, data);
</pre>
                                            </div>
                                        </div>
                                        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" height="15" width="16" alt="Closed" data-mc-alt2="Open" />Java
        </a></span>
                                            <div class="MCDropDownBody dropDownBody"><pre class="prettyprint">GnPlaylistMetadata getSeedData( GnUser gnUser, GnPlaylistCollection collection ) throws GnException
{
   // Create seed data to generate more like this playlist
   // A seed gdo can be any recognized media gdo.
   // In this example we are using the a gdo from a track in the playlist collection summary
   // In this case , randomly selecting the 5th element
   GnPlaylistIdentifier ident    = collection.mediaIdentifiers().at(4).next();
   GnPlaylistMetadata   seedAlbum  = collection.metadata( gnUser, ident );
   return seedAlbum;
}
          
//...
          
// Set options
collection.options().moreLikeThis( GnPlaylistMoreLikeThisOption.kMoreLikeThisMaxTracks, 30 );
collection.options().moreLikeThis( GnPlaylistMoreLikeThisOption.kMoreLikeThisMaxPerArtist, 10 );
collection.options().moreLikeThis( GnPlaylistMoreLikeThisOption.kMoreLikeThisMaxPerAlbum, 5 );
                  
GnPlaylistResult resultCustomMoreLikeThis = collection.generateMoreLikeThis( gnUser, getSeedData( gnUser, collection ) );</pre>
                                            </div>
                                        </div>
                                        <h2>Generating a Playlist Using PDL (Playlist Description Language)</h2>
                                        <p><a name="kanchor313"></a>The GNSDK Playlist Definition Language (PDL) is a query syntax, similar to Structured Query Language (SQL), that enables flexible custom playlist generation using human-readable text strings. PDL allows developers to dynamically create custom playlists. By storing individual PDL statements, applications can create and manage multiple preset and user playlists for later use.</p>
                                        <p>PDL statements express the playlist definitions an application uses to determine what items are included in resulting playlists. PDL supports logic operators, operator precedence, and in-line arithmetic. PDL is based on Structured Query Language (SQL). This section assumes you understand SQL and can write SQL statements.</p>
                                        <p class="note" data-mc-autonum="&lt;b&gt;&lt;span style=&quot;color: #e31b23;&quot; class=&quot;mcFormatColor&quot;&gt;Note: &lt;/span&gt;&lt;/b&gt;"><span class="autonumber"><span><b><span style="color: #e31b23;" class="mcFormatColor">Note: </span></b></span></span><b>Note</b>: Before using PDL statements, carefully consider if the provided More Like This functionality meets your design requirements. More Like This functionality eliminates the need to create and validate PDL statements.</p>
                                        <p>To generate a playlist using PDL, you can use the <code class="prettyprint">GnPlaylistCollections</code>'s <code class="prettyprint">GeneratePlaylist</code> method which takes a PDL statement as a string and returns <code class="prettyprint">GnPlaylistResult</code> objects.</p>
                                        <p>To understand how to create a PDL statement, see the <i>Playlist PDL Specification</i> article.</p>
                                        <h2><a name="kanchor314"></a>Accessing Playlist Results</h2>
                                        <p>When you generate a Playlist from a Collection Summary, using either More Like This or executing a PDL statement, results are returned in a <code class="prettyprint">GnPlaylistResult</code> object.</p>
                                        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" height="15" width="16" alt="Closed" data-mc-alt2="Open" /><b>C++</b></a></span>
                                            <div class="MCDropDownBody dropDownBody"><pre class="prettyprint"><a name="kanchor315"></a><a name="kanchor316"></a><a name="kanchor317"></a><a name="kanchor318"></a><a name="kanchor319"></a>/*-----------------------------------------------------------------------------
 *  display_playlist_results
 */
void display_playlist_results(GnUser&amp; user, playlist::GnPlaylistCollection&amp; collection, playlist::GnPlaylistResult&amp; result)
{
   /* Generated playlist count */
   int resultCount = result.Identifiers().count();

   printf("Generated Playlist: %d\n", resultCount);
   playlist::result_iterator itr = result.Identifiers().begin();

   for (; itr != result.Identifiers().end(); ++itr)
   {
    playlist::GnPlaylistMetadata data = collection.Metadata(user, *itr);

    printf("Ident '%s' from Collection '%s':\n"
       "\tGN_AlbumName  : %s\n"
       "\tGN_ArtistName : %s\n"
       "\tGN_Era    : %s\n"
       "\tGN_Genre    : %s\n"
       "\tGN_Origin   : %s\n"
       "\tGN_Mood     : %s\n"
       "\tGN_Tempo    : %s\n",
       (*itr).MediaIdentifier(),
       (*itr).CollectionName(),
        data.AlbumName(),
        data.ArtistName(),
        data.Era(),
        data.Genre(),
        data.Origin(),
        data.Mood(),
        data.Tempo()
     );
   }
}</pre>
                                            </div>
                                        </div>
                                        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" height="15" width="16" alt="Closed" data-mc-alt2="Open" />C#
        </a></span>
                                            <div class="MCDropDownBody dropDownBody"><pre class="prettyprint">private static void
EnumeratePlaylistResults(GnUser user, GnPlaylistCollection playlistCollection, GnPlaylistResult playlistResult)
{
  GnPlaylistMetadata gdoAttr = null;
  string ident = null;
  string collectionName = null;
  uint countOrdinal = 0;
  uint resultsCount = 0;
  GnPlaylistCollection tempCollection = null;

  resultsCount = playlistResult.Identifiers.count();

  Console.WriteLine("Generated Playlist: " + resultsCount);

  GnPlaylistResultIdentEnumerable playlistResultIdentEnumerable = playlistResult.Identifiers;
  foreach (GnPlaylistIdentifier playlistIdentifier in playlistResultIdentEnumerable)
  {
    collectionName = playlistIdentifier.CollectionName;
    ident = playlistIdentifier.MediaIdentifier;

    Console.Write("  " + ++countOrdinal + ": " + ident + " Collection Name:" + collectionName);

    /* The following illustrates how to get a collection handle
       from the collection name string in the results enum function call.
       It ensures that Joined collections as well as non joined collections will work with minimal overhead.
    */
    tempCollection = playlistCollection.JoinSearchByName(collectionName);

    gdoAttr = tempCollection.Metadata(user, playlistIdentifier);

    PlaylistGetAttributeValue(gdoAttr);

  }
}
          
private static void
PlaylistGetAttributeValue(GnPlaylistMetadata gdoAttr)
{
  /* Album name */
  if (gdoAttr.AlbumName != "")
    Console.WriteLine("\n\t\tGN_AlbumName:" + gdoAttr.AlbumName);

  /* Artist name */
  if (gdoAttr.ArtistName != "")
    Console.WriteLine("\t\tGN_ArtistName:" + gdoAttr.ArtistName);

  /* Artist Type */
  if (gdoAttr.ArtistType != "")
    Console.WriteLine("\t\tGN_ArtistType:" + gdoAttr.ArtistType);

  /*Artist Era */
  if (gdoAttr.Era != "")
    Console.WriteLine("\t\tGN_Era:" + gdoAttr.Era);

  /*Artist Origin */
  if (gdoAttr.Origin != "")
    Console.WriteLine("\t\tGN_Origin:" + gdoAttr.Origin);

  /* Mood */
  if (gdoAttr.Mood != "")
    Console.WriteLine("\t\tGN_Mood:" + gdoAttr.Mood);

  /*Tempo*/
  if (gdoAttr.Tempo != "")
    Console.WriteLine("\t\tGN_Tempo:" + gdoAttr.Tempo);
}</pre>
                                            </div>
                                        </div>
                                        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" height="15" width="16" alt="Closed" data-mc-alt2="Open" />Java
        </a></span>
                                            <div class="MCDropDownBody dropDownBody"><pre class="prettyprint"><a name="kanchor320"></a>private static void enumeratePlaylistResults(
  GnUser user,
  GnPlaylistCollection playlistCollection,
  GnPlaylistResult playlistResult
) throws GnException {
  int countOrdinal = 0;
  GnPlaylistMetadata data = null;
  GnPlaylistCollection tempCollection = null;
  String collectionName = null;
  System.out.println("Generated Playlist: " + playlistResult.identifiers().count());

  GnPlaylistResultIdentIterator gnPlaylistResultIdentIterator = playlistResult.identifiers().begin();

  /* Iterate through results */
  while (gnPlaylistResultIdentIterator.hasNext()) {
    GnPlaylistIdentifier playlistIdentifier = gnPlaylistResultIdentIterator.next();
      
    collectionName = playlistIdentifier.collectionName();
      
    System.out.println("  "+ ++countOrdinal +": "+playlistIdentifier.mediaIdentifier()+
                " Collection Name:"+playlistIdentifier.collectionName());
      
    /* The following illustrates how to get a collection handle
       from the collection name string in the results enum function call.
       It ensures that Joined collections as well as non joined collections will work with minimal overhead.
    */
    tempCollection = playlistCollection.joinSearchByName(collectionName);

    data = tempCollection.metadata(user, playlistIdentifier);
      
    playlistGetAttributeValue(data);
  }
}
          
private static void playlistGetAttributeValue(GnPlaylistMetadata data) {
    
  /* Album name */
  if (data.albumName() != "" &amp;&amp; data.albumName() != null)
    System.out.println("\t\tGN_AlbumName:" + data.albumName());

  /* Artist name */
  if (data.artistName() != "" &amp;&amp; data.artistName() != null)
    System.out.println("\t\tGN_ArtistName:" + data.artistName());

  /* Artist Type */
  if (data.artistType() != "" &amp;&amp; data.artistType() != null)
    System.out.println("\t\tGN_ArtistType:" + data.artistType());

  /*Artist Era */
  if (data.era() != "" &amp;&amp; data.era() != null)
    System.out.println("\t\tGN_Era:" + data.era());

  /*Artist Origin */
  if (data.origin() != "" &amp;&amp; data.origin() != null)
    System.out.println("\t\tGN_Origin:" + data.origin());

  /* Mood */
  if (data.mood() != "" &amp;&amp; data.mood() != null)
    System.out.println("\t\tGN_Mood:" + data.mood());

  /*Tempo*/
  if (data.tempo() != "" &amp;&amp; data.tempo() != null)
    System.out.println("\t\tGN_Tempo:" + data.tempo());
}</pre>
                                            </div>
                                        </div>
                                        <h2>Working with Multiple Collection Summaries</h2>
                                        <p>Creating a playlist across multiple collections can be accomplished by using joins. Joins allow you to combine multiple collection summaries at run-time, so that they can be treated as one collection by the playlist generation functions. Joined collections can be used to generate More Like This and PDL-based playlists.</p>
                                        <p>For example, if your application has created a playlist based on one device (collection 1), and another device is plugged into the system (collection 2), you might want to create a playlist based on both of these collections. This can be accomplished using one of the <code class="prettyprint">GnPlaylistCollection</code> join methods.</p>
                                        <p class="note" data-mc-autonum="&lt;b&gt;&lt;span style=&quot;color: #e31b23;&quot; class=&quot;mcFormatColor&quot;&gt;Note: &lt;/span&gt;&lt;/b&gt;"><span class="autonumber"><span><b><span style="color: #e31b23;" class="mcFormatColor">Note: </span></b></span></span>Joins are run-time constructs for playlist generation that support seamless identifier enumeration across all contained collections. They do not directly support the addition or removal of data objects, synchronization, or serialization across all collections in a join. To perform any of these operations, you can use the join management functions to access the individual collections and operate on them separately.</p>
                                        <p>To remove a collection from a join, call the <code class="prettyprint">GnPlaylistCollection</code>'s <code class="prettyprint">JoinRemove</code> method.</p>
                                        <h3><a name="kanchor321"></a><a name="kanchor322"></a>Join Performance and Best Practices</h3>
                                        <p>Creating a join is very efficient and has minimal CPU and memory requirements. When collections are joined, GNSDK internally sets references between them, rather than recreating them. Creating, deleting, and recreating joined collections when needed can be an effective and high-performing way to manage collections.</p>
                                        <p>The original handles for the individual collections remain functional, and you can continue to operate on them in tandem with the joined collection, if needed. If you release an original handle for a collection that has been entered into a joined collection, the joined collections will continue to be functional as long as the collection handle representing the join remains valid.</p>
                                        <p>A good practice for managing the joining of collections is to create a new collection handle that represents the join, and then join all existing collections into this handle. This helps remove ambiguity as to which original collection is the parent collection representing the join.</p>
                                        <h2>Synchronizing Collection Summaries</h2>
                                        <p>Collection summaries must be refreshed whenever items in the user's media collection are modified. For example, if you've created a collection summary based on the media on a particular device, and the media on that device changes, your application must synchronize the Collection Summary.</p>
                                        <p>To synchronize a collection summary to physical media:</p>
                                        <ol>
                                            <li value="1"><b>Iterate the physical media</b> — Add all existing (current and new) unique identifiers, using the <code class="prettyprint">GnPlaylistCollection</code>'s <code class="prettyprint">SyncProcessAdd</code> method. This can be done in a loop.</li>
                                            <li value="2"><b>Process the collection</b> — Call the <code class="prettyprint">GnPlaylistCollection</code>'s <code class="prettyprint">SyncProcessExecute</code> method to process the current and new identifiers and using the callback function to add or remove identifiers to or from the Collection Summary.</li>
                                        </ol>
                                        <h3><a name="kanchor323"></a>Iterating the Physical Media</h3>
                                        <p>The first step in synchronizing is to iterate through the physical media, calling the <code class="prettyprint">GnPlaylistCollection</code>'s <code class="prettyprint">SyncProcessAdd</code> method for each media item. For each media item, pass the unique identifier associated with the item to the method. The unique identifiers used must match the identifiers that were used to create the Collection Summary initially.</p>
                                        <h3>Processing the Collection</h3>
                                        <p>After preparing a Collection Summary for synchronization using the <code class="prettyprint">GnPlaylistCollection</code>'s <code class="prettyprint">SyncProcessAdd</code> method, call the <code class="prettyprint">GnPlaylistCollection</code>'s <code class="prettyprint">SyncProcessExecute</code> method to synchronize the Collection Summary's data. During processing, the callback function will be called for each difference between the physical media and the collection summary. This means the callback function will be called once for each new media item, and once for each media item that has been deleted from the collection. The callback function should add new identifiers or delete missing identifiers from the Collection Summary. For more information on adding items, see <a href="#PopCS">Populating a Collection Summary</a>. To remove items, use the <code class="prettyprint">GnPlaylistCollection</code>'s <code class="prettyprint">Remove</code> method.</p>
                                    </div>
                                </div>
                            </div>
                            <hr width="100%" size="0" align="center" />
                        </div>
                    </section><a data-close="true"></a>
                </div>
            </div>
            <script>/* <![CDATA[ */$(document).foundation();/* ]]> */</script>
        </div>
    </body>
</html>